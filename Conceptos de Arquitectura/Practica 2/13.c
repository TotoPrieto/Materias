;Implementar un reloj similar al utilizado en los partidos de b√°squet, que arranque y detenga su marcha al presionar 
;sucesivas veces la tecla F10 y que finalice el conteo al alcanzar los 30 segundos. 


TIMER EQU 10H
PIC EQU 20H
EOI EQU 20H
N_CLK EQU 10
N_F10 EQU 9


ORG 1000H
ACT DB 0
SEG DB 30H
DECI DB 30H
FIN_S DB ?



ORG 3000H

SUB_TIMER:CMP ACT,1
JNZ VUELVO
INC DECI
CMP DECI, 3AH
JNZ IMPRIMIR
MOV DECI, 30H
INC SEG
CMP SEG, 31H
JZ IMPRIMIR
MOV SEG, 30H
IMPRIMIR: MOV BX, OFFSET SEG
MOV AL, OFFSET FIN_S-OFFSET SEG
INT 7
VUELVO:MOV AL, 0
OUT TIMER, AL
MOV AL, EOI
OUT PIC, AL
IRET






SUB_F10:MOV CL, ACT
CMP CL, 1
JNZ ACTIVAR
MOV DL, 0;DESACTIVAR
MOV ACT,DL
JMP SIG
ACTIVAR:MOV DL, 1
MOV ACT, DL
SIG: MOV AL, 0
OUT TIMER, AL
MOV AL, EOI
OUT PIC, AL
IRET




ORG 2000H

CLI

MOV BX, 36
MOV AX, SUB_F10
MOV [BX],AX

MOV BX, 40
MOV AX, SUB_TIMER
MOV [BX],AX

MOV AL, 11111100b
OUT PIC+1, AL; ACTIVO TIMER Y F10

MOV AL, N_CLK
OUT PIC+5, AL; TIMER

MOV AL, N_F10
OUT PIC+4,AL; F10

MOV AL, 2
OUT TIMER+1, AL

MOV AL,0
OUT TIMER, AL

STI

LAZO:CMP SEG, 31H
JNZ LAZO
INT 0
END
